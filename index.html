<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebXR with A-Frame</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r148/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
    <script src="joystick.js"></script>
    <script src="orbit.js"></script>
    <script src="changeModel.js"></script>
</head>
<body>
    <a-scene xr-mode-ui="XRMode: vr-ar" raycaster="objects: .clickable" cursor="rayOrigin: mouse;">
        <a-assets>
            <a-asset-item id="ponyModel" src="models/pony_cartoon.glb"></a-asset-item>
        </a-assets>
        
        <a-entity environment="preset: tron; dressingAmount: 50"></a-entity>

        <a-sky color="#ECECEC"></a-sky>

        <a-light type="ambient" color="#445451"></a-light>
        <a-light type="point" intensity="2" position="2 4 4"></a-light>
        
        <a-entity id="modelEntity" class="clickable" gltf-model="#ponyModel" position="0 1 -3" scale="0.5 0.5 0.5" change-model
        event-set__enter="_event: mouseenter; material.opacity: 0.7;"
        event-set__leave="_event: mouseleave; material.opacity: 1.0;"
        event-set__click="_event: click; material.color: red;"
        
        ></a-entity>

        <a-entity id="cameraRig" position="0 0 0">
          <a-camera position="0 1.6 5" orbit="" id="camera" joystick=""></a-camera>
        </a-entity>

        
<button onclick="document.querySelector('#modelEntity').dispatchEvent(new CustomEvent('change-model', { detail: { newModel: 'models/pony_cartoon.glb' } }));">
  Change Model
</button>
    </a-scene>
    
</body>
</html>
